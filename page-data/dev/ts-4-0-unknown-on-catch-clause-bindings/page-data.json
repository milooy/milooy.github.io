{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/dev/ts-4-0-unknown-on-catch-clause-bindings/","result":{"data":{"site":{"siteMetadata":{"title":"유림로그"}},"markdownRemark":{"id":"1545828c-ecf0-55d6-8418-60bbec8cd72c","excerpt":"TL;DR catch절의 e변수 타입이 any에서 unknown으로 바뀌었습니다. type을 any로 명시해주거나 원하는 타입으로 좁혀서 사용하세요. 부레이킹 췌인지 unknown on catch clause 에러 TS v4로 업뎃하고 타입체크()를 돌려보니 에러가 10…","html":"<h2>TL;DR</h2>\n<blockquote>\n<p>catch절의 e변수 타입이 any에서 unknown으로 바뀌었습니다. <br/>type을 any로 명시해주거나 원하는 타입으로 좁혀서 사용하세요.</p>\n</blockquote>\n<h2>부레이킹 췌인지</h2>\n<p><img src=\"https://user-images.githubusercontent.com/3839771/142794836-38d559d2-3fc3-48db-a1bb-8ad61854e203.png\" alt=\"unknown on catch clause 에러\"></p>\n<p>TS v4로 업뎃하고 타입체크(<code class=\"language-text\">yarn tsc --noEmit</code>)를 돌려보니 에러가 107개가 쏟아지더라.</p>\n<p>대부분 try catch문에서 error변수 접근시 나는 에러였음</p>\n<h2>에러 변수 타입이 바뀌었어요. any → unknown</h2>\n<p>지금까지 catch절 error변수는 any타입이었다. 그래서 아무렇게나 메서드를 호출해도 타입오류가 나지 않았어요.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 어쩌구</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// x가 any라서</span>\n  x<span class=\"token punctuation\">.</span>message <span class=\"token comment\">// 오브젝트라 가정할수도 있고</span>\n  x<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 스트링이라 가정할수도 있었음.</span>\n  x<span class=\"token operator\">++</span>\n  x<span class=\"token punctuation\">.</span>yadda<span class=\"token punctuation\">.</span>yadda<span class=\"token punctuation\">.</span><span class=\"token function\">yadda</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 맘대로 다 불러도 타입에러가 나지 않았음.</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그러다보니 error변수 관련 코드에서 오타가 있어도 타입스크립트가 잡지 못하는 아쉬움이 있었음 ㅠㅠ\n<del>에러가 나는 에러핸들링 코드</del></p>\n<p>그래서 TS 4.0부터는 error변수를 unknown으로 명세해서 사용하는 개발자가 직접 error변수의 타입을 명시해주도록 업데이트함!</p>\n<h2>해결책</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 어쩌구</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  x<span class=\"token punctuation\">.</span>message <span class=\"token comment\">// type error: Object is of type 'unknown'</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> e <span class=\"token operator\">===</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    x<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 해결!</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>간단하게는 아래와 같이 해결할수도 있는데, 이는 추후에 strict모드에서 막힐 예정임</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 어쩌구</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> any<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  x<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 해결!</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-4-0.html#unknown-on-catch-clause-bindings\">https://www.typescriptlang.org/docs/handbook/release-notes/typescript-4-0.html#unknown-on-catch-clause-bindings</a></p>","frontmatter":{"title":"(TypeScript) catch절의 error변수 접근시 'Argument of type 'unknown' is not assignable...'에러가 나요!","date":"November 22, 2021","description":"TS 4.0의 unknown on catch Clause Bindings 업뎃 때문이랍니다","category":"dev"}},"previous":{"fields":{"slug":"/dev/react-hydration/"},"frontmatter":{"title":"React의 Hydration?"}},"next":{"fields":{"slug":"/books/grokking-simplicity/"},"frontmatter":{"title":"Grokking Simplicity 독서노트"}}},"pageContext":{"id":"1545828c-ecf0-55d6-8418-60bbec8cd72c","previousPostId":"703110cf-8be9-5770-9a7a-52668597b78f","nextPostId":"66c8c6fe-007e-5267-953f-9c4b672fc69e"}},"staticQueryHashes":["2841359383","3257411868"]}